[Unit]
After=docker.service
Description=Docker swarm client
Requires=docker.service

[Service]
TimeoutStartSec=0
EnvironmentFile=-/etc/swarm.%H.env
EnvironmentFile=-/etc/swarm.env

ExecStartPre=/opt/tarantool_cloud/docker_wrapper.sh start swarm_client swarm join $SWARM_CLIENT_OPTIONS
ExecStart=/usr/bin/docker attach swarm_client
ExecStop=/opt/tarantool_cloud/docker_wrapper.sh stop swarm_client

[Install]
WantedBy=multi-user.target
